<!-- index.html -->
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Usuários</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='reset.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='index_style_head.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='index_style.css') }}">

</head>

<body>
  <header>
    <div class="top">
      <a href="index2.html">
        <h1 id="nome_logo">EcoSwap</h1>
      </a>
      <nav>
        <a href="">Preservação</a>
        <!-- <a href="">Reciclagem</a> -->
        <a href="">Sobre</a>
        <!-- <a href="/adicionar_usuario">ADC User</a> -->
        <a href="/login">Login</a>
        <a class="button_verde" href="registar_usuario.html">Registrar</a>
      </nav>
    </div>

    <div class="banner">
      <img src="/static/imagens/pag/logo banner.png" alt="EcoSwap">
    </div>

    <div class="pesquisa">
      <a id="pesquisar">Pesquisar</a>
      <a id="Classificar">Classificar</a>
      <a id="agrupar">Agrupar</a>
    </div>

  </header>

  <h2>Lista de Usuários</h2>

  <!-- Verifica se o usuário está autenticado -->
  {% if current_user.is_authenticated %}
  <!-- Se autenticado, exibe boas-vindas e links de perfil e logout -->
  <p>Bem-vindo, {{ current_user.nome }}! <a href="{{ url_for('perfil') }}">Ver Perfil</a> | <a href="{{ url_for('logout') }}">Logout</a></p>

  <!-- Formulário para adicionar um novo usuário -->
  <h3>Adicionar Novo Usuário</h3>
  <form method="post" action="{{ url_for('adicionar_usuario') }}">
    <!-- Campos do formulário, como nome, email, senha, etc. -->
    <label for="nome">Nome:</label>
    <input type="text" name="nome" required>
    <label for="email">Email:</label>
    <input type="email" name="email" required>
    <label for="senha">Senha:</label>
    <input type="password" name="senha" required>
    <input type="submit" value="Adicionar Usuário">
  </form>

  <!-- Formulário para editar um usuário existente -->
  <h3>Editar Usuário</h3>
  <form method="post" action="{{ url_for('editar_usuario', id=usuario.id) }}">
    <!-- Campos do formulário preenchidos com dados atuais do usuário -->
    <label for="nome">Nome:</label>
    <input type="text" name="nome" value="{{ usuario.nome }}" required>
    <label for="email">Email:</label>
    <input type="email" name="email" value="{{ usuario.email }}" required>
    <!-- Adicione outros campos conforme necessário -->
    <input type="submit" value="Editar Usuário">
  </form>

  <!-- Formulário para excluir um usuário -->
  <h3>Excluir Usuário</h3>
  <form method="post" action="{{ url_for('excluir_usuario', id=usuario.id) }}">
    <p>Tem certeza de que deseja excluir este usuário?</p>
    <input type="submit" value="Sim, Excluir">
  </form>
  <!-- Se não autenticado, exibe link para a página de login -->
  {% else %}
  <p><a href="{{ url_for('login') }}">Login</a></p>
  {% endif %}

  <!-- Adicione sua tabela de usuários aqui -->
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nome</th>
        <th>Email</th>
        <!-- Se autenticado, exibe coluna extra para ações -->
        {% if current_user.is_authenticated %}
        <th>Ações</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      <!-- Loop pelos usuários e exibe suas informações -->
      {% for usuario in resultados %}
      <tr>
        <td>{{ usuario.id }}</td>
        <td>{{ usuario.nome }}</td>
        <td>{{ usuario.email }}</td>
        <!-- Se autenticado, exibe links para editar e excluir cada usuário -->
        {% if current_user.is_authenticated %}
        <td><a href="{{ url_for('editar_usuario', id=usuario.id) }}">Editar</a> | <a href="{{ url_for('excluir_usuario', id=usuario.id) }}">Excluir</a></td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>



</body>

</html>